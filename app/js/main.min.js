function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function checkInput(e){return!(!e.val()||"email"==e.attr("type")&&!validateEmail(e.val()))&&(e.removeClass("error"),!0)}function parseGET(e){var t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];if(e&&""!=e||(e=decodeURI(document.location.search)),e.indexOf("?")<0)return Array();var a={},s=[],i=[];-1!=(e=(e=e.split("?"))[1]).indexOf("#")&&(e=e.substr(0,e.indexOf("#"))),e.indexOf("&")>-1?s=e.split("&"):s[0]=e;for(var n=0;n<s.length;n++)for(var o=0;o<t.length;o++)s[n].indexOf(t[o]+"=")>-1&&s[n].indexOf("=")>-1&&(a[(i=s[n].split("="))[0]]=i[1]);return a}$(function(){var e=$(window),t=$(".page-top"),a=$("html, body"),s=($(".section-header"),$(".main-menu")),i=($(".preloader"),$("#thanks")),n=parseGET();n&&Object.keys(n).length>0?window.sessionStorage.setItem("utms",JSON.stringify(n)):n=JSON.parse(window.sessionStorage.getItem("utms")||"[]"),e.scroll(function(){o()});var o=function(){e.scrollTop()>e.height()?t.addClass("active"):t.removeClass("active");var a=e.scrollTop()+83;s.find("a").each(function(){var e=$(this),t=e.attr("href"),s=$(t),i=s.offset().top;i<=a&&i+s.height()>=a?e.addClass("active"):e.removeClass("active")})};function l(e){e.fadeOut(500);var t=e.find("form");t.length>0&&t[0].reset();var a=t.find(".phone");a.length>0&&a.removeClass("error")}o(),t.click(function(){a.stop().animate({scrollTop:0},"slow","swing")}),$(".hamburger").click(function(){return $this=$(this),$this.hasClass("is-active")?($this.removeClass("is-active"),s.slideUp("700")):($this.addClass("is-active"),s.slideDown("700")),!1}),$(".main-menu a").click(function(e){e.preventDefault();var t=$(this).attr("href");if(t.length>0){var s=1==t.length?0:$(t).offset().top-82;a.stop().animate({scrollTop:s},"slow","swing")}}),$(".modal-open").click(function(){var e=$(this).data("id");return $("#"+e).fadeIn(500),!1}),$(".modal").click(function(){l($(this))}),$(".modal-content").click(function(e){e.stopPropagation()}),$(".modal-close").click(function(){l($(this).closest(".modal"))}),$(".form-submit").click(function(e){e.preventDefault();var t=$(this).closest("form"),a=t.find(":required"),s=!0;a.each(function(){$elem=$(this),$elem.val()&&checkInput($elem)||($elem.addClass("error"),s=!1)});var o=t.serialize();if(Object.keys(n).length>0)for(var l in n)o+="&"+l+"="+n[l];else o+="&utm=Прямой переход";s&&($.ajax({type:"POST",url:"/mail.php",data:o}).done(function(){}),$(this).closest(".modal").fadeOut(500),a.removeClass("error"),t[0].reset(),i.fadeIn(500))}),$(".modal-submit").click(function(e){e.preventDefault()}),$(".phone").mask("+7 (999) 999 99 99",{completed:function(){$(this).removeClass("error")}});var r=$(".carousel-catalog"),c=$(".section-catalog-buttons .button");c.click(function(){c.removeClass("inverse"),$(this).addClass("inverse");var e="#"+$(this).data("id");r.removeClass("active"),$(e).addClass("active")}),$(".select").selectize(),$("input:required").keyup(function(){var e=$(this);e.hasClass("phone")||checkInput(e)}),$(".carousel-reviews").owlCarousel({items:1,nav:!1,dots:!0,loop:!0,smartSpeed:500,autoplay:!0,autoplayTimeout:1e4,margin:60,navText:["",""]}),$(".carousel-catalog").owlCarousel({nav:!1,dots:!0,loop:!0,smartSpeed:500,autoplay:!0,autoplayTimeout:1e4,margin:10,navText:["",""],onChanged:function(e){var t=$(this)[0].$element,a=t.find(".owl-item");a&&a.length>0&&setTimeout(function(){a.removeClass("scale");var e=t.find(".owl-item.active");3==e.length&&e.each(function(e,t){1==e&&$(t).addClass("scale")})},0)},responsive:{0:{items:1},768:{items:2},992:{items:3,margin:0}}}),$(".carousel-certificate").owlCarousel({nav:!1,dots:!0,loop:!0,smartSpeed:500,autoplay:!0,autoplayTimeout:1e4,margin:10,navText:["",""],onChanged:function(e){var t=$(this)[0].$element,a=t.find(".owl-item");a&&a.length>0&&setTimeout(function(){a.removeClass("scale");var e=t.find(".owl-item.active");3==e.length&&e.each(function(e,t){1==e&&$(t).addClass("scale")})},0)},responsive:{0:{items:1},768:{items:2},992:{items:3}}})});